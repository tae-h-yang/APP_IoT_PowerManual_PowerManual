    PowerManual 디바이스  

부품:  
스트랩, Arduino Nano, 가속도 센서(MPU6050), 블루투스 모듈, 전원 LED, 블루투스 LED, 운동 상태 LED, 전원 버튼, 블루투스 연결 버튼(?), 수은 건전지  

주기능:  
1. 착용된 부위의 움직임을 추적하여 운동을 올바른 자세로 하고 있는지 판단을 하여 판단 결과를 실시간으로 앱으로 전송  
ex) 스쿼트를 할때 하체가 내려가면서 무릎이 너무 앞으로 쏠리면 앱에서 앞으로 쏠렸다는 안내를 해주고 다시 정상으로 돌아가면 정상 상태임을 알려줌  

작동순서:  
1. 전원 버튼을 이용하여 디바이스의 전원을 on/off  
2. 전원 LED가 on이 되었음을 알려줌  
3. 블루투스 연결 버튼을 누르면 핸드폰 앱과의 연결 시작  
4. 블루투스 LED가 깜빡이면 연결 중이고 초록불이면 연결 완료, 빨간 불이면 계속 미연결 상태를 나타냄  
5. 이후 앱에서 디바이스를 조종하게 됨  
6. 앱에서 운동을 고르고 운동 시작을 누르면 디바이스에 해당 운동 준비를 시작  
7. 운동 상태 LED는 빨간불로 시작하여 사용자가 앱에서 안내해주는 운동 시작 자세를 잡고 3초가 지나면 초록불로 변하고 앱에서도 음성 안내를 시작함  
8. 설정해놓은 횟수가 끝나면 각 횟수마다 잘못되었던 자세 log를 보여주고 그에 따라 점수를 매김  

아이디어:  
운동 자세가 잘못 되었을 때 앱에서 음성 부저음를 보내줌  

운동 자세 측정 알고리즘:  
1. 스쿼트:  
기본 자세:  
적절하게 다리를 벌리고 서있는 자세에서 시작  
운동 자세:  
다리 각도 유지, 양 무릎은 발 앞까지만, 허벅지는 바닥과 평행한 높이까지 내리고 올라오기, 적당한 속도  

측정 자세:  
1. 양 무릎이 발을 튀어나오는지  
2. 허벅지가 바닥과 평행을 이루고 올라오는지  
3. 속도는 적당한지  

동작 구분:  
1. 내려가는 동작  
2. 올라오는 동작  

판단 종류:  
1. 충분히 내려가지 않음  
2. 너무 내려감  
3. 무릎이 발 앞으로 나옴  
4. 너무 빨리 내려감  
5. 너무 빨리 올라옴  
6. 올바른 자세  

판단 원리:  
구분 동작 1까지의 시간에 따른 x, y, z축 각도 값들을 올바르게 운동했을때의 각도값과 비교하여 판단(선형일 것으로 예상 따라서 선형 추세선(Linear Fit)을 그려 기울기나 벡터 cosine similarity 비교), 구분 동작 1 최종 값(+- 오차) 까지의 도달이 너무 빠르면 판단 4, 너무 느리면 5

<img src="https://github.com/osamhack2021/APP_IoT_PowerManual_PowerManual/blob/main/Images/cosine_similarity.png?raw=true"/>  

